{% extends "base.html" %}

{% load staticfiles %}

{% block title %}{{ post.title }}{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'blog-detail.css' %}" />
{% endblock %}


{% block content %}

<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <ol class="breadcrumb">
            <li><a href="{% url 'home:index' %}">首页</a></li>
            <li><a href="{% url 'blog:post_list' %}">博客</a></li>
            <li class="active">{{ post.title }}</li>
        </ol>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <h1 class="text-center">{{ post.title }}</h1>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <p class="text-right author">
                Published {{ post.publish }} by {{ post.author }}
            </p>
        </div>
    </div>
    
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            {{ post.body|linebreaks }}
        </div>
    </div>

    <div class="row">
        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 col-md-offset-10">
            <p class="pull-right share">
                <a href="{%  url 'blog:post_share' post.id %}">
                    <button type="button" class="btn btn-success">
                        <span class="glyphicon glyphicon-envelope"></span>
                    </button>
                </a>
            </p>
        </div>
    </div>

    {% with comments.count as total_comments %}

    <h2>
        {{ total_comments }} comment{{ total_comments|pluralize }}
    </h2>

    {% endwith %}

    {% for comment in comments %}

    <div class="comment">
        <p class="info">
            Comment {{ forloop.counter }} by {{ comment.name }}
            {{ comment.created }}
        </p>

        {{ comment.body|linebreaks }}
    </div>

    {% empty %}
        <p>There are no comments yet.</p>

    {% endfor %}

    {% if new %}
 <h2>Your comment has been added.</h2>
{% else %}
 <h2>Add a new comment</h2>
 <form action="." method="post">
 {{ comment_form.as_p }}
 {% csrf_token %}
 <p><input type="submit" value="Add comment"></p>
 </form>
{% endif %}

</div>
{% endblock %}